<div class="row">
  <div class="col-md-6">
    <%= image_tag @product.image.url(:medium) %>
  </div>
  <div class="col-md-6">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h2 class="panel-title-1"><%= @product.name %></h2>
        <h4><%= @product.category %></h4>
      </div>
      <div class="panel-body">
        <p><%= @product.description %></p>
      </div>
    </div>
  </div>
  </div>
  <div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title-1">Reviews</h3>
  </div>
  <div class="panel-body">
    <div class="star-rating" data-score= <%= @average_review %> ></div>
    <p><em>(<%= pluralize(@reviews.length, "Review") %>)</em></p>
    <h4 class="panel-title">What do you think of <%= @product.name %>?</h4>
    <p>Share your thoughts with the community.</p>
    <%= link_to "Write a review", new_product_review_path(@product), class: 'btn btn-default btn-lg' %>
  </div>
  <ul class="list-group">
    <% @reviews.each do |review| %>
      <li class="list-group-item">
        <div class="star-rating" data-score= <%= review.rating %> ></div>
          <p alt="placeholder text">By Caleb Gabriel on 2016-01-27</p>
          <p><%= review.comment %></p>
          <p>
            <% if can? :update, Review %>
              <%= link_to 'Edit review', edit_product_review_path(@product, review), class: 'btn btn-default' %>
            <% end %>

            <% if can? :destroy, Review %>
              <%= link_to 'Delete review', [@product, review], method: :delete, class: 'btn btn-default', data: {confirm: "Are you sure you want to delete this review?"} %>
            <% end %>
          </p>
      </li>
    <% end %>
  </ul>
</div>

<%= link_to 'Back to all products', products_path, class: 'btn btn-default btn-lg' %>

<script>
$('.star-rating').raty({
	path: '/assets/',
	readOnly: true,
	score: function() { return $(this).attr('data-score') }
});
</script>
